<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<!DOCTYPE html>
<link rel="stylesheet" href="css/rent-display.css">
<html>
<head>
<title>UPHW Rent Checka</title>

<script src="https://www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>

</head>
<body>

<script>
		
    window.onload = function() {
      //window.mediaElement = document.getElementById('messages');
      //window.mediaManager = new cast.receiver.MediaManager(window.mediaElement);
       castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
      
      castReceiverManager.onSenderDisconnected = function(event) {
		  	if(castReceiverManager.getSenders().length == 0 && event.reason == cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER) {
			  	close();
		  	}
		}
		
		var customMessageBus = castReceiverManager.getCastMessageBus('urn:x-cast:uphouseworks.rentchecka');
		customMessageBus.onMessage = function(event) {
			//document.getElementById("messages").innerHTML = event.data;
			console.log("Message received");
			
			function addContent(element, index, array) {
			
				console.log("found "+ element);
			
				if (index < 4) {
					var nameId = "";
					var costId = "";
					var inArray = element.split(":");
					switch(index) {
						case 0:
						nameId = "util1";
						costId = "util1+";
						break;
						
						case 1:
						nameId = "util2";
						costId = "util2+";
						break;
						
						case 2:
						nameId = "util3";
						costId = "util3+";
						break;
						
						case 3:
						nameId = "util4";
						costId = "util4+";
						break;
					}
					
					console.log("adding "+inArray[0] +" & "+ inArray[1]);
					
					document.getElementById(nameId).innerHTML = inArray[0];
					document.getElementById(costId).innerHTML = inArray[1];
				} else {
					var nameId = "";
					var cosId = "";
					var inArray = element.split(":");
					switch(index) {
						case 4:
						nameId = "user1";
						costId = "user1+";
						break;
						
						case 5:
						nameId = "user2";
						costId = "user2+";
						break;
						
						case 6:
						nameId = "user3";
						costId = "user3+";
						break;
						
						case 7:
						nameId = "user4";
						costId = "user4+";
						break;
						
						case 8:
						nameId = "user5";
						costId = "user5+";
						break;
						
						case 9:
						nameId = "user6";
						costId = "user6+";
						break;
					}
					
					console.log("adding "+inArray[0] +" & "+ inArray[1]);
					
					document.getElementById(nameId).innerHTML = inArray[0];
					document.getElementById(costId).innerHTML = inArray[1];
				}
			}
			
			var contentArray = event.data.split("&");
			
			contentArray.forEach(addContent);
		}
		
		castReceiverManager.start();
    }
</script>

<h1 class = "title standardGreen">Rent Checka</h1>

<!--Main Content Container-->
<div style = "height: 75%;">

<div style = "float: left; width: 45%;">

<!-- -------------------------------------------------------- -->
<!--  Utilities  -->
<div id = "subTitle">
<h1 style = "margin-left: 20px;">Utilities</h1>
</div>

<!--Demo Util-->
<div class = "utilBlue item">
<h2 id="util1" class = "itemLeft">Garbage</h2>
<h2 id="util1+" class = "itemRight">$100</h2>
</div>

<div class = "utilBlue item">
<h2 id="util2" class = "itemLeft">Power</h2>
<h2 id="util2+" class = "itemRight">$100</h2>
</div>

<div class = "utilBlue item">
<h2 id="util3" class = "itemLeft">Water</h2>
<h2 id="util3+" class = "itemRight">$100</h2>
</div>

<div class = "utilBlue item">
<h2 id="util4" class = "itemLeft">Internet</h2>
<h2 id="util4+" class = "itemRight">$100</h2>
</div>

</div>

<div style = "float: right; width: 45%;">

<!-- -------------------------------------------------------- -->
<!--  Rent  -->
<div id = "subTitle">
<h1 style = "margin-left: 20px;">Rent</h1>
</div>

<!--Demo rent-->
<div class = "tenantOrange item">
<h2 id="user1" class = "itemLeft">Ben</h2>
<h2 id="user1+" class = "itemRight">$460</h2>
</div>

<div class = "tenantOrange item">
<h2 id="user2" class = "itemLeft">Ben</h2>
<h2 id="user2+" class = "itemRight">$460</h2>
</div>

<div class = "tenantOrange item">
<h2 id="user3" class = "itemLeft">Ben</h2>
<h2 id="user3+" class = "itemRight">$460</h2>
</div>

<div class = "tenantOrange item">
<h2 id="user4" class = "itemLeft">Ben</h2>
<h2 id="user4+" class = "itemRight">$460</h2>
</div>

<div class = "tenantOrange item">
<h2 id="user5" class = "itemLeft">Ben</h2>
<h2 id="user5+" class = "itemRight">$460</h2>
</div>

<div class = "tenantOrange item">
<h2 id="user6" class = "itemLeft">Ben</h2>
<h2 id="user6+" class = "itemRight">$460</h2>
</div>

</div>
</div>

<h2 class="standardGreen" style="text-align:center; margin-bottom: 0px;">an uphouseworks creation</h6>

</body>

<!--
<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="https://www.gstatic.com/cast/js/receiver/1.0/cast_receiver.js"></script>
<script>
    $(function() {
        var receiver = new cast.receiver.Receiver("3DF11AB0", ["urn:x-cast:uphouseworks.rentchecka"]),
            channelHandler = new cast.receiver.ChannelHandler("urn:x-cast:uphouseworks.rentchecka"),
            $messages = $(".messages");

        channelHandler.addChannelFactory( receiver.createChannelFactory("urn:x-cast:uphouseworks.rentchecka"));

        receiver.start();

        channelHandler.addEventListener(cast.receiver.Channel.EventType.MESSAGE, onMessage.bind(this));

        function onMessage(event) {
            $messages.html(event.message.type);
        }
    });
</script>
-->

</html>